# Easy Cities 2D 🏙️

都市シミュレーションゲーム「Easy Cities」の2D改良版です。Cities Skylines並みのゲーム性を備えた、ブラウザベースの都市建設シミュレーターです。

[🎮 Play Online](https://warasugitewara.github.io/easy-cities-2d/)

## 特徴

### ゲーム機能
- **都市建設**: 道路、駅、公園を配置して都市を発展させます
- **経済システム**: 初期資金250,000円で開始し、税収と維持費で経営します
- **人口管理**: 建物の自動成長で人口が増加します
- **快適度スコア**: 複数の要因で都市の住みやすさを測定

### パラメーター
| 項目 | 説明 |
|------|------|
| **人口** | 各建物のレベルに応じた人口が増加 |
| **資金** | 建設コスト、税収、維持費で変動 |
| **快適度** | 緑地率、交通充実度、汚染度などで計算 |
| **月** | 経過時間（月次更新は月額コスト計算） |

### 建設可能な施設
- **道路** (200円/タイル): 建物の成長を促進
- **駅** (5,000円): 周辺の発展を加速（1.5倍）
- **公園** (1,000円): 快適度向上用
- **解体**: 不要な建物を除去

### 建物レベル
| レベル | 人口 | 月額税収 | 説明 |
|--------|------|---------|------|
| L1 | 10人 | 20円 | 低層住宅 |
| L2 | 50人 | 60円 | 中層住宅 |
| L3 | 200人 | 150円 | 高層住宅 |
| L4 | 500人 | 300円 | 超高層ビル |

## ゲーム画面

### 左側: 都市マップ
- **1024x1024ピクセル**: 高解像度のビットマップで都市を表示
- **リアルタイム成長**: 配置した道路や駅の周辺から建物が成長

### 右側: コントロールパネル
- **ダッシュボード**: 人口、資金、快適度、月を表示
- **ツールバー**: 建設ツール選択
- **速度調整**: 停止/通常/高速/超高速
- **セーブ機能**: 3つのセーブスロット
- **インポート/エクスポート**: JSON形式での数据交換

## 操作方法

### マウス操作
| 操作 | 効果 |
|------|------|
| **左クリック** | 選択したツールで建設 |
| **ツールボタン** | 建設ツールを切り替え |

### キーボード
| キー | 効果 |
|------|------|
| **R** | 道路モード |
| **S** | 駅モード |
| **P** | 公園モード |
| **D** | 解体モード |

### ボタン
- **⏸ 停止** / **▶ 通常** / **⚡ 高速** / **🚀 超高速**: ゲーム速度調整
- **💾 セーブ**: 現在のゲームデータを保存
- **📂 ロード**: 保存されたデータを読み込み
- **📤 エクスポート**: ゲームデータをJSON形式でダウンロード
- **📥 インポート**: JSON形式のデータを読み込み
- **🔄 リセット**: ゲームをリセット

## 永続化機能

### LocalStorage（3つのセーブスロット）
各スロットに以下の情報を保存:
- マップデータ（128x128グリッド）
- 人口、資金、快適度、月
- 建設モード、ポーズ状態

### JSONエクスポート/インポート
```json
{
  "version": "1.0.0",
  "exportedAt": "2026-01-28T07:00:00.000Z",
  "gameState": {
    "map": [...],
    "population": 5000,
    "money": 150000,
    "comfort": 75,
    "month": 120,
    ...
  }
}
```

## 快適度スコア計算

快適度は以下5つの指標の平均値です:

1. **緑地率** (0-100): 公園の占める割合
2. **交通充実度** (0-100): 駅の数と分布
3. **人口密度** (0-100): 過密を避けるスコア
4. **資金状況** (0-100): 資金/初期資金の比率
5. **汚染度補正** (0-100): 工業地帯からの距離

## インストール

```bash
git clone https://github.com/warasugitewara/easy-cities-2d.git
cd easy-cities-2d
npm install
npm run dev
```

## ビルド

```bash
npm run build
```

生成されたファイルは `dist/` ディレクトリに出力されます。

## 技術スタック

- **言語**: TypeScript
- **ビルドツール**: Vite
- **レンダリング**: Canvas API
- **ストレージ**: LocalStorage + JSON
- **デプロイ**: GitHub Pages

## ファイル構成

```
src/
├── main.ts           # メインアプリケーション
├── engine.ts         # ゲームロジック・シミュレーション
├── renderer.ts       # Canvas描画処理
├── ui.ts             # UIコンポーネント・操作
├── storage.ts        # LocalStorage・JSON I/O
├── constants.ts      # ゲーム定数
└── style.css         # スタイル定義
```

## ゲームの目標

1. **都市を発展させる**: 建設して人口を増やす
2. **資金を管理する**: 税収で維持費をカバーする
3. **快適度を向上させる**: 公園や駅を配置して住環境を整える
4. **バランスを取る**: 成長と安定性の両立

## 難易度

Cities Skylines 2D版として設定されています:
- 初期資金が限られている
- 建設・維持費に戦略性が求められる
- 不適切な配置は経営破綻につながる

## ゲームオーバー条件

資金がマイナスになると破産しゲームオーバーです。

## 今後の予定

- [ ] 複数の建物タイプ（住宅、商業、工業）
- [ ] インフラシステム（水道、電力、ゴミ処理）
- [ ] 災害・イベント機能
- [ ] マップサイズ変更オプション
- [ ] スコアランキング
- [ ] マルチプレイ対応

## ライセンス

MIT License

## 貢献

バグ報告や機能リクエストは、GitHubのIssuesでお願いします。

## クレジット

オリジナル版作成: 友人
改良・2D版開発: warasugitewara

---

**楽しいシティビルディングを！🏗️**
